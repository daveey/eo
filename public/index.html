<html>
  <head>
    <title>EO Player</title>

    <script>
      let screenId = document.URL.split("#")[1] || "";
      var imageUrls = [];
      for (var i = 0; i < 6; i++) {
        imageUrls.push(`img/${screenId}/${i + 1}.png`);
        var numImagesLoaded = 0;
      }
      function loadImages() {
          var imageView = document.getElementById("image-loader");
          for (var i = 0; i < imageUrls.length; i++) {
              var image = document.createElement("img");
              imageView.appendChild(image);
              image.width = 0;
              image.height = 0;
              image.addEventListener("load", function() {
                  numImagesLoaded++;
              });
              image.src = imageUrls[i];
          }
      }
        
        var imageIndex = 0;

        function setBackground(imgUrl) {
              var htmlElement = document.getElementsByTagName("html")[0];
              htmlElement.style.background = "url(" + imgUrl + ") no-repeat center center fixed";
              htmlElement.style.backgroundSize = "cover";          
        }    
        
        function displayImage() {
            let imageIndex = (new Date()).getMinutes() % imageUrls.length;
            setBackground(imageUrls[imageIndex]);
        }

        function onLoad() {
          loadImages();
          setInterval(function() {
            if (numImagesLoaded == imageUrls.length) {
                displayImage();
            }
          }, 100);
        }

</script>

    <style> 
    body {
      width: 1080px;
      height: 1920px;
    }

    #image-view {
      width: 1080px;
      height: 1920px;
    }
    </style>

  <meta charset="utf-8">
  <meta name="viewport" content="height = 1920, width = 1080">
  <style type="text/css">
    body {
      margin: 0;
    }
  </style>

</head>

  <body onload="onLoad();">
    <div id="image-loader"></div>
  </body>
</html>
